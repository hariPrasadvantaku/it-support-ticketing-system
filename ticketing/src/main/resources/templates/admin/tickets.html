<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>All Tickets</title>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
</head>
<body class="bg-light">
	<div th:replace="fragments/navbar :: body"></div>
	<div class="container mt-4">

		<h3>All Tickets</h3>

		<div class="card shadow mb-3" th:each="t : ${tickets}">
			<div class="card-body">

				<h5 th:text="${t.title}"></h5>
				<p th:text="${t.description}"></p>

				<p>
					Status: <span class="badge bg-info" th:text="${t.status}"></span>
				</p>

				<!-- ASSIGN SUPPORT -->
				<form th:action="@{/admin/tickets/assign}" method="post"
					class="d-flex gap-2">
					<input type="hidden" name="ticketId" th:value="${t.id}"> <select
						name="supportId" class="form-select w-50">
						<option th:each="s : ${supports}" th:value="${s.id}"
							th:text="${s.username}"></option>
					</select>

					<button class="btn btn-success">Assign</button>
				</form>

				<a th:href="@{'/admin/tickets/' + ${t.id}}"
					class="btn btn-outline-primary mt-2"> View Details </a>

			</div>
		</div>

	</div>
</body>
</html>
